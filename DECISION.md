# π― ν•™μµ μ¬κ° μμ‚¬κ²°μ • κ°€μ΄λ“

## ν„μ¬ μƒν™© μ •λ¦¬

### μ²΄ν¬ν¬μΈνΈ μƒνƒ
- β **μµκ³  μ„±λ¥ μ²΄ν¬ν¬μΈνΈ μ—†μ** (step 298,800, text_loss: 0.9358)
- β οΈ  **step 351,000λ§ λ°±μ—…** (μ΄λ―Έ loss μ¦κ°€ μ‹μ‘ν• μ‹μ )
- π”΄ **step 436k-438k** (μ™„μ „ν λ§κ°€μ§„ μƒνƒ)

### λ°μ΄ν„°
- β… 548λ§κ° μƒν” (μ¶©λ¶„!)
- β… 0.32 epochλ§ μ§„ν–‰ (κ³Όμ ν•© μ•„λ‹)
- β… λ°μ΄ν„° ν’μ§ μ–‘νΈ (μ¶”μ •)

### λ¬Έμ  μ§„λ‹¨
- π”΄ Learning Rate λ„λ¬΄ λ†’μ (2e-5)
- β οΈ  μµκ³ μ  μ²΄ν¬ν¬μΈνΈ λ¶„μ‹¤
- β οΈ  Validation loss λ―ΈκΈ°λ΅

## μ„ νƒμ§€ λΉ„κµ

### Option 1: Phase μ „λµ (step 351,000μ—μ„ μ¬κ°)

**Phase 1 - κ²€μ¦ (1-2μ‹κ°„)**
```bash
./tools/phase1_validate_lr.sh
```
- LR: 1e-6 (κ·Ήμ €)
- Steps: 5000
- λ©ν‘: νλ³µ κ°€λ¥μ„± ν™•μΈ

**μ„±κ³µ κ°€λ¥μ„±: 40-50%**

**μμƒ κ²°κ³Ό:**
- β… μµμ„ : loss 1.5-1.8λ΅ νλ³µ
- β οΈ  λ³΄ν†µ: μ•½κ°„ κ°μ† ν›„ μ •μ²΄
- β μµμ•…: κ³„μ† μ¦κ°€

**Phase 2 - κ³„μ† ν•™μµ (Phase 1 μ„±κ³µ μ‹)**
```bash
./tools/phase2_continue.sh
```
- LR: 2e-6
- 1 epoch λ©ν‘

**μ΄ μμƒ μ‹κ°„:**
- μ„±κ³µ: 1-2μ‹κ°„(κ²€μ¦) + 40-50μ‹κ°„(ν•™μµ) = ~45μ‹κ°„
- μ‹¤ν¨: 1-2μ‹κ°„ + 50-70μ‹κ°„(μ¬ν•™μµ) = ~65μ‹κ°„

**μ¥μ :**
- β… λΉ λ¥Έ κ²€μ¦ (1-2μ‹κ°„)
- β… 351k step ν™μ© κ°€λ¥
- β… μ‹¤ν¨ν•΄λ„ ν° μ†μ‹¤ μ—†μ

**λ‹¨μ :**
- β μ‹μ‘μ μ΄ μ΄λ―Έ λ‚μ μƒνƒ
- β μ„±κ³µν•΄λ„ 0.9κΉμ§€λ” μ–΄λ ¤μ›€
- β μ‹¤ν¨ μ‹ κ²°κµ­ μ¬ν•™μµ

---

### Option 2: Base λ¨λΈλ¶€ν„° μ¬ν•™μµ

```bash
./tools/restart_from_base.sh
```

**μ„¤μ •:**
- Base: /mnt/sda1/models/IndexTTS-2/gpt.pth
- LR: 5e-6 (λ³΄μμ )
- Batch: 8
- Warmup: 10000 step

**μ„±κ³µ κ°€λ¥μ„±: 80-90%**

**μμƒ κ²°κ³Ό:**
- β… text_loss < 0.9 λ‹¬μ„± κ°€λ¥
- β… μ•μ •μ μΈ ν•™μµ
- β… κ²€μ¦λ λ°©λ²•

**μ΄ μμƒ μ‹κ°„: 50-70μ‹κ°„**

**μ¥μ :**
- β… λ†’μ€ μ„±κ³µ κ°€λ¥μ„±
- β… μ²μλ¶€ν„° μ¬λ°”λ¥Έ LR
- β… Validation loss κΈ°λ΅
- β… μµμΆ… ν’μ§ λ³΄μ¥

**λ‹¨μ :**
- β μ‹κ°„μ΄ μ¤λ κ±Έλ¦Ό
- β 351k step λ²„λ¦Ό

---

## μ¶”μ²

### μ‹κ°„μ΄ μ¤‘μ”ν• κ²½μ°
β†’ **Option 1 (Phase μ „λµ)**
- 1-2μ‹κ°„ ν¬μν•΄μ„ κ°€λ¥μ„± ν™•μΈ
- μ‹¤ν¨ν•΄λ„ μ¬ν•™μµμΌλ΅ μ „ν™

### ν’μ§μ΄ μ¤‘μ”ν• κ²½μ°
β†’ **Option 2 (μ¬ν•™μµ)**
- μ²μλ¶€ν„° μ λ€λ΅
- μ‹κ°„μ€ κ±Έλ ¤λ„ ν™•μ‹¤ν•¨

### μ μ¶©μ•
1. Phase 1 μ‹λ„ (1-2μ‹κ°„)
2. μ„±κ³µλ¥  ν‰κ°€
3. 50% λ―Έλ§μ΄λ©΄ μ¦‰μ‹ μ¬ν•™μµ μ „ν™

## μ‹¤ν–‰ λ…λ Ήμ–΄

### Option 1: Phase μ „λµ
```bash
cd /mnt/sdc1/ws/workspace/monorepo/external/index-tts
source /mnt/sdc1/ws/workspace/.venv_indextts/bin/activate

# Step 1: Phase 1 κ²€μ¦
./tools/phase1_validate_lr.sh

# Step 2: ν‰κ°€
./tools/check_success_rate.sh

# Step 3a: μ„±κ³µ μ‹
./tools/phase2_continue.sh

# Step 3b: μ‹¤ν¨ μ‹
./tools/restart_from_base.sh
```

### Option 2: λ°”λ΅ μ¬ν•™μµ
```bash
cd /mnt/sdc1/ws/workspace/monorepo/external/index-tts
source /mnt/sdc1/ws/workspace/.venv_indextts/bin/activate

./tools/restart_from_base.sh
```

## κ²°μ • μ”μΈ

| μ”μΈ | Phase μ „λµ | μ¬ν•™μµ |
|------|-----------|--------|
| μ‹κ°„ μ—¬μ  | λ¶€μ΅± | μ¶©λ¶„ |
| ν’μ§ μ”κµ¬ | μ¤‘κ°„ | λ†’μ |
| λ¦¬μ¤ν¬ μμ© | κ°€λ¥ | μµμ†ν™” |
| μµμΆ… μ„±λ¥ | 1.5-1.8 | < 0.9 |
| μ΄ μ‹κ°„ (μµμ•…) | ~65μ‹κ°„ | 50-70μ‹κ°„ |
| μ΄ μ‹κ°„ (μµμ„ ) | ~45μ‹κ°„ | 50-70μ‹κ°„ |

## π’΅ μ  μ¶”μ²

**μ‹κ°„ λ€λΉ„ ν¨μ¨μ„ μƒκ°ν•λ©΄: Option 1 (Phase μ „λµ)**

μ΄μ :
1. 1-2μ‹κ°„λ§ ν¬μν•΄μ„ νλ‹¨ κ°€λ¥
2. μ„±κ³µν•λ©΄ ~45μ‹κ°„μΌλ΅ λ
3. μ‹¤ν¨ν•΄λ„ μ΄ ~65μ‹κ°„ (μ¬ν•™μµκ³Ό ν° μ°¨μ΄ μ—†μ)
4. μ μ—°ν• μμ‚¬κ²°μ •

**ν•μ§€λ§ ν™•μ‹¤ν• ν’μ§μ„ μ›ν•λ©΄: Option 2 (μ¬ν•™μµ)**

μ΄μ :
1. λ†’μ€ μ„±κ³µ κ°€λ¥μ„± (80-90%)
2. μµμΆ… ν’μ§ λ³΄μ¥ (< 0.9)
3. μ‹ν–‰μ°©μ¤ μ—†μ
4. μ •μ‹ μ μΌλ΅ νΈν•¨

## λ‹¤μ λ‹¨κ³„

μ„ νƒν•μ‹  ν›„:
```bash
# TensorBoard λ¨λ‹ν„°λ§
http://localhost:6006

# μ‹¤μ‹κ°„ loss ν™•μΈ
./tools/monitor_training.sh
```
